<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Simple TODO List</title>
    <link rel="stylesheet" href="./font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./style.css">
    <!--<link rel="stylesheet" href="./bootstrap.min.css">-->
</head>

<body>
    <h1 class="center">SIMPLE TODO LIST</h1>
    <h2 class="center">FROM RUBY GARAGE</h2>
    <div id="application">
        <div class="container" v-if="!autorizedUser"> <button @click="showingSignInModal = true;">SignIn </button> <button @click="showingLogInModal = true;"> Log In </button>
            <div class="signInModal" id="signInModal" v-if="showingSignInModal">
                <div class="todoModalContainer">
                    <div class="signInModalHeading">
                        <p class="fleft">Create your account</p> <button class="fright close" @click="showingSignInModal = false;">x</button>
                        <div class="clear"></div>
                    </div>
                    <div class="todoModalContent">
                        <div class="form"> <input v-model="newUser.username" class="fright newUserName" type="text" placeholder="your username typing here">                            <br> <input v-model="newUser.password" class="fright newUserName" type="text" placeholder="your password">                            <br> <button @click="showingSignInModal = false; saveUser()">SignIn</button> </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container" v-else>
            <div class="addons" v-if="addonsON">
                <p class="errorMessage" v-if="errorMessage"> {{errorMessage}} </p>
                <p class="successMessage" v-if="successMessage"> {{successMessage}} </p>
                <!-- start modal blocks for TODOs actions -->
                <div class="todoModal" id="todoModal" v-if="showingTodoModal">
                    <div class="todoModalContainer">
                        <div class="todoModalHeading">
                            <p class="fleft">Creating new Todo</p> <button class="fright close" @click="showingTodoModal = false;">x</button>
                            <div class="clear"></div>
                        </div>
                        <div class="todoModalContent">
                            <div class="form"> <input v-model="newTodo.todoname" class="fright newTodoName" type="text" placeholder="Start typing here to create a todo...">                                <br> <button @click="showingTodoModal = false; saveTodo()">Save</button> </div>
                        </div>
                    </div>
                </div>
                <div class="editTodoModal" id="editTodoModal" v-if="showingEditTodoModal">
                    <div class="editTodoModalContainer">
                        <div class="editTodoModalHeading">
                            <p class="fleft">Editing Todo</p> <button class="fright close" @click="showingEditTodoModal = false;">x</button>
                            <div class="clear"></div>
                        </div>
                        <div class="editTodoModalContent">
                            <div class="form"><input type="text" v-model="clickedTodo.todoname" /> <button @click="showingEditTodoModal = false; updateTodo()">Update</button>                                </div>
                        </div>
                    </div>
                </div>
                <div class="deleteTodoModal" id="deleteTodoModal" v-if="showingDeleteTodoModal">
                    <div class="deleteTodoModalContainer">
                        <div class="deleteTodoModalHeading">
                            <p class="fleft">deleteing Todo</p> <button class="fright close" @click="showingDeleteTodoModal = false;">x</button>
                            <div class="clear"></div>
                        </div>
                        <div class="deleteTodoModalContent">
                            <p class="center">You will delete this todo:</p>
                            <h3>{{clickedTodo.todoname}}</h3><br>
                            <p class="fleft">Are you sure?</p> <button class="fright" @click="showingDeleteTodoModal = false; deleteTodo()">Delete</button>                            </div>
                    </div>
                </div>
                <!--   end modal blocks for TODOs actions -->
                <!-- start modal blocks for TASKs actions -->
                <div class="taskModal" id="taskModal" v-if="showingTaskModal">
                    <div class="taskModalContainer">
                        <div class="taskModalHeading">
                            <p class="fleft">Creating new Task</p> <button class="fright close" @click="showingTaskModal = false;">x</button>
                            <div class="clear"></div>
                        </div>
                        <div class="taskModalContent">
                            <div class="form">
                                <h3>{{newTask.texttask}}</h3><br>
                                <p>Select finish day for task</p> <input type="date" placeholder="YYYY-MM-YY" v-model="newTask.finaldate">
                                <div class="hide"> {{ newTask.todoid=clickedTodo.id }} </div> <button @click="showingTaskModal = false; saveTask()">Save </button>                                </div>
                        </div>
                    </div>
                </div>
                <div class="editTaskModal" id="editTaskModal" v-if="showingEditTaskModal">
                    <div class="editTaskModalContainer">
                        <div class="editTaskModalHeading">
                            <p class="fleft">Editing Task</p> <button class="fright close" @click="showingEditTaskModal = false;">x</button>
                            <div class="clear"></div>
                        </div>
                        <div class="editTaskModalContent">
                            <div class="form"><input type="text" v-model="clickedTask.texttask" />
                                <p>Finish day for editTask</p> <input type="date" v-model="clickedTask.finaldate"> <button @click="showingEditTaskModal = false; updateTask()">Update</button>                                </div>
                        </div>
                    </div>
                </div>
                <div class="deleteTaskModal" id="deleteTaskModal" v-if="showingDeleteTaskModal">
                    <div class="deleteTaskModalContainer">
                        <div class="deleteTaskModalHeading">
                            <p class="fleft">deleteing Task</p> <button class="fright close" @click="showingDeleteTaskModal = false;">x</button>
                            <div class="clear"></div>
                        </div>
                        <div class="deleteTaskModalContent">
                            <p class="center">You will delete this task:</p>
                            <h3>{{clickedTask.texttask}}</h3><br>
                            <p class="fleft">Are you sure?</p> <button class="fright" @click="showingDeleteTaskModal = false; deleteTask()">Delete</button>                            </div>
                    </div>
                </div>
                <!--   end modal blocks for TASKs actions -->
            </div>
            <table class="todolist" v-for="todo in todos">
                <tr class="todoheading">
                    <th><i class="fa fa-calendar" aria-hidden="true"></i></th>
                    <th></th>
                    <th>
                        <h2 class="fleft white">{{todo.todoname}}</h2>
                    </th>
                    <th>
                        <p class="fright gray"> <i class="fa fa-pencil" aria-hidden="true" @click="showingEditTodoModal = true; selectTodo(todo)"></i>                            | <i class="fa fa-trash" aria-hidden="true" @click="showingDeleteTodoModal = true; selectTodo(todo)"></i>                            </p>
                    </th>
                </tr>
                <tr class="todonaming">
                    <th><i class="fa fa-plus green fa-2x" aria-hidden="true"></i></th>
                    <th></th>
                    <td> <input v-model="newTask.texttask" class="fright newTaskName" type="text" placeholder="Start typing here to create a task...">                        </td>
                    <td> <button class="fleft white addTask" @click="showingTaskModal = true; selectTodo(todo)">Add task</button>                        </td>
                </tr>
                <tr v-bind:class="{ completed: task.iscomplete == 1 }" class="todolistitem" v-for="task in tasks" v-if="todo.id==task.todoid">
                    <th>
                        <div v-if="task.iscomplete == 1"> <input type="checkbox" checked v-on:click="selectTask(task);completedTask()"> </div>
                        <div v-else>
                        <input type="checkbox" v-on:click="selectTask(task);completedTask()"> </div>
                    </th>
                    <th class="lines"></th>
                    <td>
                        <h3>{{task.texttask}}</h3>
                    </td>
                    <td class="flex center">
                        <div class="inner-flex down-up"><i class="fa fa-caret-up" aria-hidden="true"></i>
                            <p>â€”</p><i class="fa fa-caret-down" aria-hidden="true"></i></div>
                        <p class="inner-flex"> | </p> <i class="fa fa-pencil inner-flex" aria-hidden="true" @click="showingEditTaskModal = true; selectTask(task)"></i>
                        <p class="inner-flex"> | </p> <i class="fa fa-trash inner-flex" aria-hidden="true" @click="showingDeleteTaskModal = true; selectTask(task)"></i>                        </td>
                </tr>
            </table>
            <div class="center"> <button class="addTodo white" @click="showingTodoModal = true;"> <i class="fa fa-plus" aria-hidden="true"></i>Add TODO List </button>                </div>
        </div> <div class="hide">{{addonsON=true}}</div></div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.2/axios.min.js"></script>
<script src="./vue.js"></script>
<script src="./app.js"></script>

</html>